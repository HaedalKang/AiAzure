# 언어 서비스를 사용하는 텍스트 분석의 기본 사항

## 목차
- [언어 서비스를 사용하는 텍스트 분석의 기본 사항](#언어-서비스를-사용하는-텍스트-분석의-기본-사항)
  - [목차](#목차)
  - [소개](#소개)
  - [이 모듈에서는 텍스트 분석의 기능과 이를 사용하는 방법을 살펴보겠습니다.](#이-모듈에서는-텍스트-분석의-기능과-이를-사용하는-방법을-살펴보겠습니다)
  - [Text Analytics 이해](#text-analytics-이해)
    - [토큰화](#토큰화)
    - [빈도 분석](#빈도-분석)
    - [텍스트 분류를 위한 기계 학습](#텍스트-분류를-위한-기계-학습)
    - [의미 체계 언어 모델](#의미-체계-언어-모델)
  - [텍스트 분석 시작](#텍스트-분석-시작)
    - [엔터티 인식 및 연결](#엔터티-인식-및-연결)
    - [언어 감지](#언어-감지)
    - [감정 분석 및 오피니언 마이닝](#감정-분석-및-오피니언-마이닝)
    - [핵심 구 추출](#핵심-구-추출)
- [Azure AI 언어에 대한 리소스 만들기](#azure-ai-언어에-대한-리소스-만들기)
  - [연습 - Language Studio를 사용하여 텍스트 분석](#연습---language-studio를-사용하여-텍스트-분석)
  - [요약](#요약)
  - [출처](#출처)


## 소개

시스템 시스템이 인간과 유사한 방식으로 텍스트의 주체를 해석하려면 서면 또는 음성 언어를 이해하고 친절하게 응답하는 AI 내 영역인 자연어 처리(NLP)를 사용합니다. 텍스트 분석은 구조화되지 않은 텍스트에서 정보를 추출하는 NLP 프로세스를 설명합니다.

자연어 처리를 사용하여 다음을 만들 수 있습니다.

 - 제품 마케팅 캠페인에 대한 감정을 검색하는 소셜 미디어 피드 분석기입니다.
 - 카탈로그의 문서를 요약하는 문서 검색 애플리케이션입니다.
 - 텍스트에서 브랜드 및 회사 이름을 추출하는 애플리케이션입니다.

Azure AI 언어는 텍스트를 이해하고 분석하는 기능을 포함하는 클라우드 기반 서비스입니다. Azure AI 언어에는 감정 분석, 핵심 구 식별, 텍스트 요약 및 대화 언어 이해를 지원하는 다양한 기능이 포함되어 있습니다.

이 모듈에서는 텍스트 분석의 기능과 이를 사용하는 방법을 살펴보겠습니다.
---
## Text Analytics 이해

Azure AI 언어 서비스의 텍스트 분석 기능을 살펴보기 전에 텍스트 분석 및 기타 NLP(자연어 처리) 작업을 수행하는 데 사용되는 몇 가지 일반 원칙과 일반적인 기술을 살펴보겠습니다.

컴퓨터로 텍스트를 분석하는 데 사용된 초기 기술 중 일부는 일종의 의미 체계 의미를 유추하기 위해 텍스트 본문(코퍼스)에 대한 통계적 분석을 포함합니다. 간단히 말해서, 지정된 문서에서 가장 일반적으로 사용되는 단어를 결정할 수 있다면 문서가 무엇에 관한 것인지에 대한 좋은 아이디어를 가져올 수 있는 경우가 많습니다.

### 토큰화

코퍼스를 분석하는 첫 번째 단계는 코퍼스를 토큰으로 나누는 것입니다. 간단히 설명하기 위해, 학습 텍스트의 각 불연속 단어를 토큰으로 생각할 수 있습니다(실제로는 부분 단어 또는 단어와 문장 부호의 조합에 대한 토큰을 생성할 수 있음).

예를 들어, 유명한 미국 대통령 음성에서 "we choose to go to the moon"라는 구를 생각해 보세요. 이 구는 숫자 식별자를 사용하여 다음 토큰으로 나눌 수 있습니다.

 1. we
 2. choose
 3. 끝
 4. GO
 5. the
 6. moon

"to"(토큰 번호 3)가 코퍼스에서 두 번 사용되었습니다. "we choose to go to the moon"라는 구는 토큰 [1,2,3,4,3,5,6]으로 표현될 수 있습니다.

참고
```
우리는 텍스트의 각 개별 단어에 대해 토큰이 식별되는 간단한 예를 사용했습니다. 그러나 해결하려는 NLP 문제의 특정 종류에 따라 토큰화에 적용될 수 있는 다음 개념을 고려합니다.

 - 텍스트 정규화: 토큰을 생성하기 전에 문장 부호를 제거하고 모든 단어를 소문자로 변경하여 텍스트를 정규화하도록 선택할 수 있습니다. 단어 빈도에만 의존하는 분석의 경우 이 방식은 전반적인 성능을 개선합니다. 그러나 일부 의미 체계 의미가 손실될 수 있습니다. 예를 들어, "Mr Banks has worked in many banks."라는 문장을 고려해 보세요. 분석을 통해 Mr Banks라는 인물과 그가 근무했던 banks를 구별할 수 있습니다. 마침표를 포함하면 해당 단어가 문장 끝에 나온다는 정보를 제공하므로 "banks."를 "banks"에 대한 별도의 토큰으로 간주할 수도 있습니다.
 - 불용어 제거. 중지 단어는 분석에서 제외해야 하는 단어입니다. 예를 들어 "the", "a" 또는 "it"은 텍스트를 더 쉽게 읽을 수 있지만 의미 체계적 의미는 거의 추가하지 않습니다. 이러한 단어를 제외함으로써 텍스트 분석 솔루션은 중요한 단어를 더 잘 식별할 수 있습니다.
 - n-gram은 "I have" 또는 "he walked"와 같이 여러 단어로 이루어진 구입니다. 한 단어 구는 unigram, 두 단어 구는 bi-gram, 3단어 구는 tri-gram, 이런 식으로 계속됩니다. 기계 학습 모델은 단어를 그룹으로 고려함으로써 텍스트를 더 잘 이해하게 됩니다.
 - 형태소 분석은 단어를 계산하기 전에 알고리즘을 적용하여 단어를 통합하여 "power", "powered" 및 "powerful"과 같이 어근이 동일한 단어가 동일한 토큰으로 해석되도록 하는 기술입니다.
```

### 빈도 분석

단어를 토큰화한 후 몇 가지 분석을 수행하여 각 토큰의 발생 횟수를 계산할 수 있습니다. 가장 일반적으로 사용되는 단어("a", "the" 등과 같은 불용 단어 제외)는 종종 텍스트 코퍼스의 주요 주제에 대한 단서를 제공할 수 있습니다. 예를 들어, 이전에 고려한 "go to the moon" 음성의 전체 텍스트에서 가장 일반적인 단어에는 ""new", "go", "space" 및 "moon"이 포함됩니다. 텍스트를 바이그램(단어 쌍)으로 토큰화한다면 음성에서 가장 일반적인 바이그램은 "moon"입니다. 이 정보를 통해 본문이 주로 우주 여행과 달에 가는 것에 관련되어 있다는 것을 쉽게 추측할 수 있습니다.

팁
```
단순히 각 토큰의 발생 횟수를 세는 단순 빈도 분석은 단일 문서를 분석하는 효과적인 방법이 될 수 있지만, 동일한 코퍼스 내의 여러 문서를 구별해야 하는 경우 각 문서에서 가장 관련성이 높은 토큰을 결정하는 방법이 필요합니다. TF-IDF(용어 빈도 - 역 문서 빈도)는 전체 문서 컬렉션에서 보다 일반적인 빈도와 비교하여 한 문서에 단어 또는 용어가 나타나는 빈도를 기준으로 점수를 계산하는 일반적인 기술입니다. 이 기술을 사용하면 특정 문서에 자주 나타나는 단어에 대해 높은 수준의 관련성이 가정되지만, 다른 광범위한 문서에서는 상대적으로 드물게 나타납니다.
```

### 텍스트 분류를 위한 기계 학습

또 다른 유용한 텍스트 분석 기술은 로지스틱 회귀와 같은 분류 알고리즘을 사용하여 알려진 분류 집합을 기반으로 텍스트를 분류하는 기계 학습 모델을 학습시키는 것입니다. 이 기술의 일반적인 적용은 감정 분석 또는 오피니언 마이닝을 수행하기 위해 텍스트를 긍정적 또는 부정적으로 분류하는 모델을 학습시키는 것입니다.

예를 들어, 이미 0(부정적) 또는 1(긍정적)로 레이블이 지정된 다음 레스토랑 리뷰를 고려합니다.

 - 음식과 서비스가 모두 훌륭함: 1
 - 정말 끔찍한 환경: 0
 - 음! 맛있는 음식과 즐거운 분위기: 1
 - 느린 서비스 및 수준 이하의 음식: 0

레이블이 지정된 리뷰가 충분하면 토큰화된 텍스트를 기능으로 사용하고 감정(0 또는 1)을 레이블로 사용하여 분류 모델을 학습시킬 수 있습니다. 모델은 토큰과 감정 간의 관계를 요약합니다. 예를 들어, "훌륭함", "맛있음" 또는 "재미"와 같은 단어에 대한 토큰이 포함된 리뷰는 1(긍정적)의 감정을 반환할 가능성이 높은 반면 "끔찍함", "느림", "표준 이하"와 같은 단어가 포함된 리뷰는 0(부정적)을 반환할 가능성이 높습니다.

### 의미 체계 언어 모델

NLP의 최신 기술이 발전함에 따라 토큰 간의 의미 체계 관계를 캡슐화하는 모델을 학습하는 기능으로 인해 강력한 언어 모델이 등장하게 되었습니다. 이러한 모델의 핵심은 언어 토큰을 포함이라고 하는 벡터(다중값 숫자 배열)로 인코딩하는 것입니다.

각 토큰이 특정 “위치”를 차지하도록 토큰 포함 벡터의 요소를 다차원 공간의 좌표로 생각하면 유용할 수 있습니다. 토큰이 특정 차원을 따라 서로 더 가까울수록 의미 체계적 관련성이 높아집니다. 즉, 관련 단어가 함께 더 가깝게 그룹화됩니다. 간단한 예제로, 토큰에 대한 포함이 다음과 같은 세 가지 요소가 있는 벡터로 구성한다고 가정합니다.

 - 4(“dog“): [10.3.2]
 - 5 ("bark"): [10,2,2]
 - 8(“cat“): [10,3,1]
 - 9(“meow“): [10,2,1]
 - 10(“skateboard“): [3,3,1]

다음과 같이 3차원 공간에서 이러한 벡터를 기반으로 토큰의 위치를 그릴 수 있습니다.

![](../img/example-embeddings-graph.png)

포함 공간에 있는 토큰의 위치에는 토큰이 서로 얼마나 가깝게 관련되는지에 대한 일부 정보가 포함됩니다. 예를 들어 “dog“의 토큰은 “cat“ 및 “bark“에 가깝습니다. “cat“ 및 “bark“의 토큰은 “meow“에 가깝습니다. “skateboard“의 토큰은 다른 토큰과 더 멀리 떨어져 있습니다.

업계에서 사용하는 언어 모델은 이러한 원칙을 기반으로 하지만 훨씬 더 복잡합니다. 예를 들어, 사용되는 벡터는 일반적으로 더 많은 차원을 갖습니다. 또한 주어진 하나의 토큰 집합에 대해 적절한 임베딩을 계산하는 데는 여러 가지 방법이 있습니다. 방법에 따라 자연어 처리 모델의 예측이 달라집니다.

다음 다이어그램은 대부분의 최신 자연어 처리 솔루션에 대한 일반화된 보기를 보여 줍니다. 원시 텍스트의 대규모 코퍼스는 토큰화되어 다양한 형식의 자연어 처리 작업을 지원할 수 있는 언어 모델을 학습하는 데 사용됩니다.

![](../img/language-model.png)

언어 모델이 지원하는 일반적인 NLP 작업은 다음과 같습니다.

 - 핵심 용어 추출 또는 텍스트에서 명명된 엔터티 식별과 같은 텍스트 분석.
 - 텍스트를 긍정적 또는 부정적으로 분류하는 감정 분석 및 오피니언 마이닝.
 - 텍스트가 한 언어에서 다른 언어로 자동 번역되는 기계 번역.
 - 요약: 큰 텍스트 본문의 주요 요점을 요약합니다.
 - 언어 모델이 자연어 입력을 해석하고 적절한 응답을 반환할 수 있는 봇 또는 디지털 도우미와 같은 대화형 AI 솔루션입니다.

이러한 기능과 그 이상은 다음에 살펴볼 Azure AI 언어 서비스의 모델에서 지원됩니다.

---
## 텍스트 분석 시작

Azure AI 언어는 구조화되지 않은 텍스트에 대해 고급 자연어 처리를 수행할 수 있는 Azure AI 서비스 제품의 일부입니다. Azure AI 언어의 텍스트 분석 기능은 다음을 포함합니다.

 - 명명된 엔터티 인식은 사람, 장소, 이벤트 등을 식별합니다. 사용자 지정 범주를 추출하도록 이 기능을 사용자 지정할 수도 있습니다.
 - 엔터티 링크 설정은 Wikipedia에 대한 링크와 함께 알려진 엔터티를 식별합니다.
 - PII(개인 식별 정보) 검색은 개인 건강 정보(PHI)를 포함하여 개인적으로 중요한 정보를 식별합니다.
 - 언어 감지는 텍스트의 언어를 식별하고 언어 코드(예: 영어의 경우 "en")를 반환합니다.
 - 감정 분석 및 오피니언 마이닝은 텍스트가 긍정적인지 부정적인지 여부를 식별합니다.
 - 요약은 가장 중요한 정보를 식별하여 텍스트를 요약합니다.
 - 핵심 구 추출은 구조화되지 않은 텍스트의 주요 개념을 나열합니다.

### 엔터티 인식 및 연결

Azure AI 언어에 구조화되지 않은 텍스트를 제공하면 인식되는 텍스트에 엔터티 목록이 반환됩니다. 엔터티는 특정 유형 또는 범주의 항목입니다. 경우에 따라 다음 표에 나온 것과 같은 하위 유형이 있습니다.

| Type     | 하위 유형     | 예                              |
|----------|-----------|--------------------------------|
| 사람       |           | “빌 게이츠”, “존”                   |
| 위치       |           | “파리”, “뉴욕”                     |
| 조직       |           | “Microsoft”                    |
| 수량       | 숫자        | “6” 또는 “여섯”                    |
| 수량       | 백분율       | “25%” 또는 “오십 퍼센트”              |
| 수량       | 서수        | “1st” 또는 “첫 번째”                |
| 수량       | 나이        | “생후 90일” 또는 “30세”              |
| 수량       | 통화        | “10.99”                        |
| 수량       | 차원        | “10마일”, “40cm”                 |
| 수량       | 온도        | “45도”                          |
| DateTime |           | “2012년 2월 4일, 오후 6:30”         |
| DateTime | 날짜        | “2017년 5월 2일” 또는 “2017/05/02”  |
| DateTime | 시간        | “8am” 또는 “8:00”                |
| DateTime | DateRange | “5월 2일~5월 5일”                  |
| DateTime | TimeRange | “오후 6시부터 오후 7시”                |
| DateTime | 기간        | “1분 45초”                       |
| DateTime | 설정        | “매주 화요일”                       |
| URL      |           | "https://www.bing.com"         |
| 메일       |           | "support@microsoft.com"        |
| 미국 국내 전화 번호 |           | “(312) 555-0176”               |
| IP 주소       |           | “10.0.1.125”                   |

zure AI 언어는 또한 특정 참조에 연결하여 엔터티를 명확하게 하는 데 도움이 되는 엔터티 연결을 지원합니다. 인식된 엔터티에 대해 서비스는 관련 ‘Wikipedia’ 문서 URL을 반환합니다.

예를 들어 Azure AI 언어를 사용하여 다음 레스토랑 리뷰 추출에서 엔터티를 검색한다고 가정합니다.

```
“지난주에 시애틀에 있는 레스토랑에서 식사했습니다.”
```

| 엔터티 | 유형       | 하위 유형     | Wikipedia URL                          |
|-----|----------|-----------|----------------------------------------|
| 시애틀 | 위치       |           | https://en.wikipedia.org/wiki/Seattle  |
| 지난주 | DateTime | DateRange |                                        |

### 언어 감지

Azure AI 언어의 언어 감지 기능을 사용하여 텍스트가 작성된 언어를 식별합니다. 분석을 위해 한 번에 여러 문서를 제출할 수 있습니다. 제출된 각 문서에 대해 서비스는 다음을 검색합니다.

 - 언어 이름(예: “영어”)
 - ISO 639-1 언어 코드(예: “en”).
 - 언어 감지에 대한 신뢰 수준을 나타내는 점수

예를 들어 고객이 설문조사를 완료하고 음식, 서비스, 직원 등에 대한 피드백을 제공할 수 있는 레스토랑을 소유하고 운영하고 있다는 시나리오를 생각해 보겠습니다. 고객으로부터 다음과 같은 리뷰를 받았다고 가정해 봅시다.

```
리뷰 1: “A fantastic place for lunch. The soup was delicious.”

리뷰 2: “Comida maravillosa y gran servicio.”

리뷰 3: “The croque monsieur avec frites was terrific. Bon appetit!”
```

Azure AI 언어의 텍스트 분석 기능을 사용하여 각 리뷰에 대한 언어를 감지할 수 있습니다. 다음 결과로 응답할 수 있습니다.

| 문서   | 언어 이름 | ISO 6391 코드 | 점수   |
|------|-------|-------------|------|
| 리뷰 1 | 영어    | en          | 1.0  |
| 리뷰 2 | 스페인어  | es          | 1.0  |
| 리뷰 3 | 영어    | en          | 0.9  |

영어와 프랑스어가 혼합된 텍스트이지만 리뷰 3에서 감지된 언어는 영어입니다. 언어 감지 서비스는 텍스트에서 지배적 언어에 중점을 둡니다. 이 서비스는 알고리즘을 사용하여 텍스트의 다른 언어와 비교하고 언어에 대한 구 길이 또는 총 텍스트 양과 같은 지배적 언어를 결정합니다. 지배적 언어는 언어 코드와 함께 값이 반환됩니다. 혼합 언어 텍스트의 결과로 신뢰도 점수가 1 미만일 수 있습니다.

속성이 모호하거나 언어 콘텐츠가 혼합된 텍스트가 있을 수 있습니다. 이러한 상황은 어려움을 초래할 수 있습니다. 모호한 콘텐츠의 예로는 문서에 제한된 텍스트 또는 문장 부호만 포함하는 경우를 들 수 있습니다. 예를 들어 Azure AI 언어를 사용하여 ":-)" 텍스트를 분석하면 언어 이름과 언어 식별자에 대한 값이 알 수 없음이고 점수는 NaN입니다(이는 숫자가 아님을 나타내는 데 사용됩니다).

### 감정 분석 및 오피니언 마이닝

Azure AI 언어의 텍스트 분석 기능은 텍스트를 평가하고 각 문장에 대한 감정 점수와 레이블을 반환할 수 있습니다. 이 기능은 소셜 미디어, 고객 리뷰, 토론 포럼 등에서 긍정적이고 부정적인 감정을 감지하는 데 유용합니다.

Azure AI 언어는 미리 빌드된 기계 학습 분류 모델을 사용하여 텍스트를 평가합니다. 서비스는 긍정, 중립 및 부정의 세 가지 범주로 감정 점수를 반환합니다. 각 범주에서 0에서 1 사이의 점수가 제공됩니다. 점수는 제공된 텍스트가 특정 감정일 가능성이 얼마나 되는지 나타냅니다. 하나의 문서 감정도 제공됩니다.

예를 들어 다음 두 레스토랑 리뷰에서 감정을 분석할 수 있습니다.

```
리뷰 1: “어젯밤 이 레스토랑에서 저녁 식사를 했으며 직원들의 정중한 태도가 첫눈에 들어왔습니다. 직원들은 우리에게 친절한 태도로 인사를 하고 테이블로 곧장 안내했습니다. 테이블은 깨끗했고, 의자는 편안했으며, 음식은 정말 맛있었습니다.”
```

및

```
리뷰 2: “이 레스토랑에서 경험한 저녁 식사는 최악 중 하나였습니다. 서비스가 느렸고 음식은 형편없었습니다. 다시는 여기에서 식사하지 않을 것입니다.”
```

첫 번째 검토의 감정 점수는 다음과 같습니다. 문서 감정: 긍정적 긍정 점수: .90 중립 점수: .10 부정 점수: .00

두 번째 검토는 다음 응답을 반환할 수 있습니다. 문서 감정: 부정적 긍정 점수: .00 중립 점수: .00 부정 점수: .99

### 핵심 구 추출

핵심 구 추출은 텍스트의 주요 포인트를 파악합니다. 앞서 설명한 레스토랑의 시나리오를 생각해보겠습니다. 설문 조사가 많은 경우 검토를 읽는 데 시간이 오래 걸릴 수 있습니다. 그 대신 언어 서비스의 핵심 구 추출 기능을 사용해서 주요 논점을 요약할 수 있습니다.

다음과 같은 리뷰를 받을 수 있습니다.

```
“여기서 생일 축하를 위해 저녁 식사를 했고 환상적인 경험이었습니다. 친절한 여주인이 우리에게 인사를 하고 바로 테이블로 데려갔습니다. 분위기는 편안했고, 음식은 훌륭했으며, 서비스 또한 뛰어났습니다. 훌륭한 음식과 세심한 서비스를 원한다면 이 장소를 추천합니다.”
```

핵심 구 추출은 다음과 같은 구를 추출하여 이 리뷰에 몇 가지 컨텍스트를 제공할 수 있습니다.

 - 생일 축하
 - 환상적인 경험
 - 친절한 여주인
 - 훌륭한 음식
 - 세심한 서비스
 - 저녁 식사
 - table
 - 분위기
 - 장소

감정 분석을 사용하여 긍정적인 검토임을 확인할 뿐만 아니라 핵심 구 서비스를 사용하여 검토의 중요한 요소를 파악할 수도 있습니다.

# Azure AI 언어에 대한 리소스 만들기

애플리케이션에서 Azure AI 언어를 사용하려면 Azure 구독에서 적절한 리소스를 프로비전해야 합니다. 다음 리소스 유형 중 하나를 선택할 수 있습니다.

 - 언어 리소스 - Azure AI 언어 서비스를 사용하려는 경우 또는 다른 서비스와 별도로 리소스에 대한 액세스 및 청구를 관리하려는 경우 이 리소스 종류를 선택합니다.
 - Azure AI 서비스 리소스 - 다른 Azure AI 서비스와 함께 Azure AI 언어를 사용할 계획이고 이러한 서비스에 대한 액세스 및 청구를 함께 관리하려는 경우 이 리소스 유형을 선택합니다.

---
## 연습 - Language Studio를 사용하여 텍스트 분석

Azure를 구독하고 있는 경우 Language Studio를 사용하여 Azure AI 언어의 기능을 탐색할 수 있습니다.

TODO : 실습자료 만들기

---
## 요약

Azure AI 언어는 원시 텍스트에 대한 고급 자연어 처리를 제공하며 감정 분석, 핵심 구 추출, 언어 감지, 명명된 엔터티 인식 등 네 가지 주요 기능이 포함됩니다.

---
## 출처
[Microsoft learn 언어 서비스를 사용하는 텍스트 분석의 기본 사항](https://learn.microsoft.com/ko-kr/training/modules/analyze-text-with-text-analytics-service/)